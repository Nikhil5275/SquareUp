(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,r,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return o(5178)}])},6866:function(e,r,o){"use strict";o.d(r,{Ab:function(){return s.Ab},Ap:function(){return a},Bt:function(){return s.Bt},ET:function(){return s.ET},I8:function(){return l},IO:function(){return s.IO},JU:function(){return s.JU},QT:function(){return s.QT},ar:function(){return s.ar},cf:function(){return s.cf},db:function(){return c},oe:function(){return s.oe},r7:function(){return s.r7},vr:function(){return s.vr},z1:function(){return d}});var t=o(3106),n=o(5876),s=o(9828);let i=(0,t.C6)().length?(0,t.Mq)():(0,t.ZF)({apiKey:"AIzaSyChtios867UY-BnI2y0msZtOJV25pedC9E",authDomain:"squareup-32d41.firebaseapp.com",projectId:"squareup-32d41",storageBucket:"squareup-32d41.firebasestorage.app",messagingSenderId:"583310661278",appId:"1:583310661278:web:d0621e1e11393758978d8f",measurementId:"G-N0C6MEMN7G"}),l=(0,n.v0)(i),a=new n.hJ;a.setCustomParameters({prompt:"select_account"});let c=(0,s.ad)(i),d=(0,s.hJ)(c,"servers")},5178:function(e,r,o){"use strict";o.r(r),o.d(r,{default:function(){return el}});var t=o(5893),n=o(7294),s=o(6459),i=o(1046),l=o(8029),a=o(6254),c=o(2553),d=o(92),x=o(8491),h=o(8663),g=o(8455),p=o(5478),u=o(9342),f=o(573),m=o(3636),b=o(4032),j=o(3229),y=o(8387),S=o(8186),v=o(1035),C=o(980),w=o(2845),z=o(2846),W=o(4831),_=o(2206),k=o(7475),I=o(2515),A=o(2859),E=o(3658),U=o(2519);let J=()=>{let e=(0,i.ff)("#4A7C59","#2D3748"),r=(0,i.ff)("rgba(74,124,89,0.2)","rgba(0,0,0,0.3)");return(0,t.jsx)(l.x,{w:"40px",h:"40px",bg:e,display:"flex",alignItems:"center",justifyContent:"center",rounded:"lg",boxShadow:"0 2px 8px ".concat(r),children:(0,t.jsx)(c.J,{viewBox:"0 0 24 24",boxSize:6,color:"#ffffff",children:(0,t.jsx)("path",{fill:"currentColor",d:"M12 4l-6 8h4v8h4v-8h4z"})})})},P=e=>{let{servers:r,selectedServerId:o,isCreatingServer:n,newServerName:s,user:a,sidebarOpen:h,onToggleSidebar:g,onCreateServer:p,onStartCreateServer:u,onCancelCreateServer:f,onNewServerNameChange:b,onServerSelect:j,onDeleteServer:y,onLogin:C,onLogout:w}=e;(0,i.ff)("gray.50","gray.900");let z=(0,i.ff)("white","gray.800"),W=(0,i.ff)("gray.200","gray.600"),k=(0,i.ff)("gray.50","gray.700"),A=(0,i.ff)("gray.100","gray.600"),E=(0,i.ff)("gray.900","gray.100"),P=(0,i.ff)("gray.600","gray.400"),F="#4A7C59",q="#E8F5E8",{colorMode:O,toggleColorMode:Y}=(0,i.If)();return(0,t.jsx)(l.x,{w:h?"280px":"0",bg:z,borderRight:"1px solid",borderColor:W,transition:"width 0.3s cubic-bezier(0.4, 0, 0.2, 1)",overflow:"hidden",display:{base:h?"block":"none",md:"block"},position:{base:"fixed",md:"relative"},h:"100vh",zIndex:10,left:0,top:0,boxShadow:{base:h?"xl":"none",md:"none"},children:(0,t.jsxs)(S.g,{spacing:0,align:"stretch",h:"full",children:[(0,t.jsxs)(l.x,{p:6,borderBottom:"1px solid",borderColor:W,bg:z,children:[(0,t.jsxs)(m.U,{justify:"space-between",mb:5,children:[(0,t.jsxs)(m.U,{spacing:3,children:[(0,t.jsx)(J,{}),(0,t.jsxs)(S.g,{align:"start",spacing:0,children:[(0,t.jsx)(d.x,{fontSize:"md",fontWeight:"700",color:E,letterSpacing:"-0.02em",children:"SquareUp"}),(0,t.jsx)(d.x,{fontSize:"xs",color:P,fontWeight:"400",children:"Expense Manager"})]})]}),(0,t.jsx)(U.h,{"aria-label":"Toggle sidebar",icon:(0,t.jsx)(c.J,{as:I.q5L}),onClick:g,variant:"ghost",size:"sm",display:{base:"flex",md:"none"},color:P,_hover:{bg:A,color:E}})]}),(0,t.jsx)(x.z,{leftIcon:(0,t.jsx)(c.J,{as:I.OvN}),onClick:()=>u(),bg:F,color:"white",size:"md",width:"full",fontWeight:"600",fontSize:"sm",rounded:"lg",h:"44px",_hover:{bg:"#005EA6",transform:"translateY(-1px)",boxShadow:"md"},_active:{transform:"translateY(0)"},isDisabled:!a,transition:"all 0.2s",children:"New Server"})]}),n&&(0,t.jsx)(l.x,{p:5,borderBottom:"1px solid",borderColor:W,bg:k,children:(0,t.jsxs)(S.g,{spacing:3,align:"stretch",children:[(0,t.jsx)(_.I,{placeholder:"Enter server name",value:s,onChange:e=>b(e.target.value),onKeyPress:e=>{"Enter"===e.key&&p()},size:"md",bg:z,border:"1px solid",borderColor:W,rounded:"lg",h:"44px",fontSize:"sm",_focus:{borderColor:F,boxShadow:"0 0 0 3px #E6F2FF"},_hover:{borderColor:F},autoFocus:!0}),(0,t.jsxs)(m.U,{spacing:2,children:[(0,t.jsx)(x.z,{leftIcon:(0,t.jsx)(c.J,{as:I._rq}),onClick:p,size:"md",bg:F,color:"white",flex:1,fontWeight:"600",fontSize:"sm",rounded:"lg",h:"44px",_hover:{bg:"#005EA6"},isDisabled:!s.trim(),children:"Create"}),(0,t.jsx)(x.z,{onClick:f,size:"md",variant:"ghost",fontSize:"sm",rounded:"lg",h:"44px",_hover:{bg:A},children:"Cancel"})]})]})}),(0,t.jsx)(l.x,{flex:1,overflowY:"auto",p:3,children:(0,t.jsxs)(S.g,{spacing:2,align:"stretch",children:[r.map(e=>(0,t.jsx)(l.x,{p:3,rounded:"xl",bg:o===e.id?q:"transparent",border:o===e.id?"2px solid ".concat(F):"2px solid transparent",cursor:"pointer",_hover:{bg:o===e.id?q:A,borderColor:o===e.id?F:W,transform:"translateX(2px)"},onClick:()=>j(e.id),position:"relative",role:"group",transition:"all 0.2s",children:(0,t.jsxs)(m.U,{spacing:3,justify:"space-between",children:[(0,t.jsxs)(m.U,{spacing:3,flex:1,minW:0,children:[(0,t.jsx)(l.x,{w:"40px",h:"40px",bg:o===e.id?F:k,rounded:"lg",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,children:(0,t.jsx)(c.J,{as:I.j8v,color:o===e.id?"white":F,boxSize:5})}),(0,t.jsxs)(S.g,{align:"start",spacing:1,flex:1,minW:0,children:[(0,t.jsx)(d.x,{fontSize:"sm",fontWeight:o===e.id?"700":"600",color:o===e.id?F:E,noOfLines:1,letterSpacing:"-0.01em",children:e.name}),(0,t.jsxs)(d.x,{fontSize:"xs",color:o===e.id?F:P,fontWeight:"400",children:[e.members.length," ",1===e.members.length?"member":"members"]})]})]}),(0,t.jsx)(U.h,{"aria-label":"Delete server",icon:(0,t.jsx)(c.J,{as:I.Ybf}),onClick:r=>{r.stopPropagation(),confirm('Delete "'.concat(e.name,'"?'))&&y(e.id)},size:"sm",variant:"ghost",colorScheme:"red",opacity:{base:1,md:0},_groupHover:{opacity:1},transition:"opacity 0.2s",rounded:"lg"})]})},e.id)),0===r.length&&(0,t.jsxs)(l.x,{p:4,textAlign:"center",children:[(0,t.jsx)(c.J,{as:I.j8v,boxSize:8,color:P,opacity:.3,mb:2}),(0,t.jsx)(d.x,{fontSize:"xs",color:P,children:a?"Create your first server":"Sign in to create servers"})]})]})}),(0,t.jsx)(l.x,{p:5,borderTop:"1px solid",borderColor:W,bg:z,children:a?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(m.U,{spacing:3,mb:4,p:3,bg:k,rounded:"xl",children:[(0,t.jsx)(v.q,{src:null==a?void 0:a.photoURL,name:null==a?void 0:a.displayName,size:"md",border:"2px solid ".concat(W)}),(0,t.jsxs)(S.g,{align:"start",spacing:.5,flex:1,minW:0,children:[(0,t.jsx)(d.x,{fontSize:"sm",fontWeight:"600",color:E,noOfLines:1,children:(null==a?void 0:a.displayName)||"User"}),(0,t.jsx)(d.x,{fontSize:"xs",color:P,noOfLines:1,fontWeight:"400",children:(null==a?void 0:a.email)||""})]})]}),(0,t.jsxs)(m.U,{spacing:2,children:[(0,t.jsx)(x.z,{"aria-label":"Toggle theme",leftIcon:(0,t.jsx)(c.J,{as:"dark"===O?I.kXG:I.wOW}),onClick:Y,variant:"ghost",size:"sm",flex:1,fontSize:"xs",fontWeight:"500",rounded:"lg",_hover:{bg:A},children:"Theme"}),(0,t.jsx)(x.z,{"aria-label":"Sign out",leftIcon:(0,t.jsx)(c.J,{as:I.xqh}),onClick:w,variant:"ghost",size:"sm",colorScheme:"red",flex:1,fontSize:"xs",fontWeight:"500",rounded:"lg",_hover:{bg:"red.50",color:"red.600"},children:"Sign Out"})]})]}):(0,t.jsx)(x.z,{leftIcon:(0,t.jsx)(c.J,{as:I._fJ}),onClick:C,bg:F,color:"white",size:"md",width:"full",fontWeight:"600",fontSize:"sm",rounded:"lg",h:"44px",_hover:{bg:"#005EA6"},children:"Sign In"})})]})})};var F=o(232);let q=e=>{let{currentServer:r,user:o,sidebarOpen:n,onToggleSidebar:s,onLogin:a,onStripeConnect:h,stripeAccountStatus:g="none",onVenmoSettings:p,hasVenmoUsername:u=!1}=e,f=(0,i.ff)("white","gray.800"),b=(0,i.ff)("gray.200","gray.600"),j=(0,i.ff)("gray.900","gray.100"),y=(0,i.ff)("gray.600","gray.400"),v="#4A7C59",C="#3D6B4A";return(0,t.jsx)(l.x,{bg:f,borderBottom:"1px solid",borderColor:b,px:6,py:4,boxShadow:"sm",children:(0,t.jsxs)(m.U,{justify:"space-between",align:"center",children:[(0,t.jsxs)(m.U,{spacing:4,children:[(0,t.jsx)(U.h,{"aria-label":"Toggle sidebar",icon:(0,t.jsx)(c.J,{as:I.cur}),onClick:s,variant:"ghost",size:"md",display:{base:"flex",md:"none"},rounded:"lg",_hover:{bg:"gray.100"}}),(0,t.jsxs)(S.g,{align:"start",spacing:1,children:[(0,t.jsx)(F.X,{size:"lg",fontWeight:"700",color:j,letterSpacing:"-0.03em",children:r?r.name:"Select a server"}),r&&(0,t.jsxs)(m.U,{spacing:4,children:[(0,t.jsxs)(d.x,{fontSize:"sm",color:y,fontWeight:"400",children:[r.members.length," ",1===r.members.length?"member":"members"]}),(0,t.jsx)(d.x,{fontSize:"sm",color:y,fontWeight:"400",children:"â€¢"}),(0,t.jsxs)(d.x,{fontSize:"sm",color:y,fontWeight:"400",children:[r.debts.length," ",1===r.debts.length?"expense":"expenses"]})]})]})]}),(0,t.jsxs)(m.U,{spacing:3,children:[o&&p&&(0,t.jsx)(x.z,{leftIcon:(0,t.jsx)(c.J,{as:u?I._rq:I.Wqx}),onClick:p,variant:u?"outline":"solid",bg:u?"transparent":"#3D95CE",color:u?"blue.600":"white",borderColor:u?"blue.300":"transparent",size:"sm",fontWeight:"600",fontSize:"xs",rounded:"lg",px:4,h:"36px",_hover:{bg:u?"blue.50":"#2D7BB8",transform:"translateY(-1px)",boxShadow:"md"},_active:{transform:"translateY(0)"},transition:"all 0.2s",children:u?"Venmo Set":"Venmo"}),o&&h&&(0,t.jsx)(x.z,{leftIcon:(0,t.jsx)(c.J,{as:"active"===g?I._rq:I.XiQ}),onClick:h,variant:"active"===g?"outline":"solid",bg:"active"===g?"transparent":v,color:"active"===g?"green.600":"white",borderColor:"active"===g?"green.300":"transparent",size:"sm",fontWeight:"600",fontSize:"xs",rounded:"lg",px:4,h:"36px",_hover:{bg:"active"===g?"green.50":C,transform:"translateY(-1px)",boxShadow:"md"},_active:{transform:"translateY(0)"},transition:"all 0.2s",children:"active"===g?"Payment Ready":"Connect Payment"}),!o&&(0,t.jsx)(x.z,{leftIcon:(0,t.jsx)(c.J,{as:I._fJ}),onClick:a,bg:v,color:"white",size:"md",fontWeight:"600",fontSize:"sm",rounded:"lg",px:6,h:"44px",_hover:{bg:C,transform:"translateY(-1px)",boxShadow:"md"},_active:{transform:"translateY(0)"},transition:"all 0.2s",children:"Sign In"})]})]})})};var O=o(5482),Y=o(4614),N=o(5139),T=o(7391),L=o(1360),D=o(10),B=o(9860),V=o(9244),R=o(5443);let M=e=>{let{isOpen:r,onClose:o,selectedDebt:n,paymentProvider:s,isProcessingPayment:a,onPaymentProviderChange:h,onProcessPayment:g}=e,p=(0,i.ff)("white","gray.800"),u=(0,i.ff)("gray.200","gray.600"),f="#4A7C59",b="#E8F5E8",j=(0,i.ff)("gray.900","gray.100"),y=(0,i.ff)("gray.600","gray.400"),v=(0,i.ff)("gray.100","gray.600"),C=(0,i.ff)("gray.50","gray.700");return(0,t.jsxs)(O.u_,{isOpen:r,onClose:o,size:"lg",isCentered:!0,children:[(0,t.jsx)(Y.Z,{bg:"blackAlpha.600",backdropFilter:"blur(4px)"}),(0,t.jsxs)(N.h,{bg:p,border:"1px solid",borderColor:u,rounded:"2xl",boxShadow:"0 20px 60px rgba(0,0,0,0.3)",maxW:"500px",children:[(0,t.jsx)(T.x,{color:j,fontSize:"xl",fontWeight:"700",pb:4,borderBottom:"1px solid",borderColor:u,children:"Complete Payment"}),(0,t.jsx)(L.o,{color:y,_hover:{color:j,bg:v},rounded:"lg"}),(0,t.jsx)(D.f,{p:8,children:n&&(0,t.jsxs)(S.g,{spacing:6,align:"stretch",children:[(0,t.jsx)(l.x,{p:6,bg:C,rounded:"xl",border:"1px solid",borderColor:u,textAlign:"center",children:(0,t.jsxs)(S.g,{align:"center",spacing:3,children:[(0,t.jsx)(d.x,{fontSize:"sm",color:y,fontWeight:"500",children:"Payment to"}),(0,t.jsx)(d.x,{fontSize:"lg",fontWeight:"700",color:j,children:n.to}),(0,t.jsxs)(d.x,{fontSize:"4xl",fontWeight:"800",color:f,letterSpacing:"-0.02em",children:["$",n.amount.toFixed(2)]})]})}),(0,t.jsxs)(l.x,{children:[(0,t.jsx)(d.x,{fontSize:"sm",fontWeight:"700",color:j,mb:4,children:"Payment Method"}),(0,t.jsx)(B.E,{value:s,onChange:h,children:(0,t.jsxs)(S.g,{spacing:3,align:"stretch",children:[(0,t.jsx)(l.x,{p:4,border:"2px solid",borderColor:"stripe"===s?f:u,rounded:"xl",cursor:"pointer",onClick:()=>h("stripe"),bg:"stripe"===s?b:p,_hover:{borderColor:f,bg:"stripe"===s?b:v},transition:"all 0.2s",children:(0,t.jsx)(V.Y,{value:"stripe",colorScheme:"green",size:"lg",children:(0,t.jsxs)(m.U,{spacing:3,ml:3,children:[(0,t.jsx)(c.J,{as:I.XiQ,boxSize:5,color:"stripe"===s?f:y}),(0,t.jsxs)(S.g,{align:"start",spacing:0,children:[(0,t.jsx)(d.x,{fontSize:"sm",fontWeight:"700",color:j,children:"Credit/Debit Card"}),(0,t.jsx)(d.x,{fontSize:"xs",color:y,fontWeight:"400",children:"Secure payment via Stripe"})]})]})})}),(0,t.jsx)(l.x,{p:4,border:"2px solid",borderColor:"venmo"===s?f:u,rounded:"xl",cursor:"pointer",onClick:()=>h("venmo"),bg:"venmo"===s?b:p,_hover:{borderColor:f,bg:"venmo"===s?b:v},transition:"all 0.2s",children:(0,t.jsx)(V.Y,{value:"venmo",colorScheme:"green",size:"lg",children:(0,t.jsxs)(m.U,{spacing:3,ml:3,children:[(0,t.jsx)(c.J,{as:I.Wqx,boxSize:5,color:"venmo"===s?f:y}),(0,t.jsxs)(S.g,{align:"start",spacing:0,children:[(0,t.jsx)(d.x,{fontSize:"sm",fontWeight:"700",color:j,children:"Venmo"}),(0,t.jsx)(d.x,{fontSize:"xs",color:y,fontWeight:"400",children:"Pay with your Venmo account"})]})]})})})]})})]})]})}),(0,t.jsx)(R.m,{p:6,borderTop:"1px solid",borderColor:u,bg:C,children:(0,t.jsxs)(m.U,{spacing:3,width:"full",children:[(0,t.jsx)(x.z,{variant:"ghost",onClick:o,isDisabled:a,flex:1,fontWeight:"600",fontSize:"sm",h:"48px",rounded:"xl",_hover:{bg:v},children:"Cancel"}),(0,t.jsxs)(x.z,{bg:f,color:"white",onClick:g,isLoading:a,loadingText:"Processing...",leftIcon:(0,t.jsx)(c.J,{as:I.XiQ}),flex:2,fontWeight:"700",fontSize:"sm",h:"48px",rounded:"xl",_hover:{bg:"#005EA6",transform:"translateY(-2px)",boxShadow:"lg"},_active:{transform:"translateY(0)"},transition:"all 0.2s",children:["Pay $",(null==n?void 0:n.amount.toFixed(2))||"0.00"]})]})})]})]})};var X=o(6657),G=o(8843),Q=o(9915),$=o(90);let Z=e=>{let{isOpen:r,onClose:o,accountStatus:n,isLoading:s,isCreatingAccount:a,onConnect:h}=e,g=(0,i.ff)("white","gray.800"),p=(0,i.ff)("gray.200","gray.600"),u="#4A7C59",f=(0,i.ff)("gray.900","gray.100"),j=(0,i.ff)("gray.600","gray.400"),y=(0,i.ff)("gray.100","gray.600"),v=(0,i.ff)("gray.50","gray.700");return(0,t.jsxs)(O.u_,{isOpen:r,onClose:o,size:"lg",isCentered:!0,children:[(0,t.jsx)(Y.Z,{bg:"blackAlpha.600",backdropFilter:"blur(4px)"}),(0,t.jsxs)(N.h,{bg:g,border:"1px solid",borderColor:p,rounded:"2xl",boxShadow:"0 20px 60px rgba(0,0,0,0.3)",maxW:"500px",children:[(0,t.jsx)(T.x,{color:f,fontSize:"xl",fontWeight:"700",pb:4,borderBottom:"1px solid",borderColor:p,children:(0,t.jsxs)(m.U,{spacing:3,children:[(0,t.jsx)(c.J,{as:I.XiQ,boxSize:6,color:u}),(0,t.jsx)(d.x,{children:"Stripe Payment Setup"})]})}),(0,t.jsx)(L.o,{color:j,_hover:{color:f,bg:y},rounded:"lg"}),(0,t.jsx)(D.f,{p:8,children:(0,t.jsxs)(S.g,{spacing:6,align:"stretch",children:["active"===n.status?(0,t.jsxs)(X.b,{status:"success",rounded:"xl",children:[(0,t.jsx)(G.z,{}),(0,t.jsxs)(l.x,{children:[(0,t.jsx)(Q.C,{children:"Account Connected!"}),(0,t.jsx)($.X,{children:"You can now receive payments directly to your bank account."})]})]}):"pending"===n.status?(0,t.jsxs)(X.b,{status:"warning",rounded:"xl",children:[(0,t.jsx)(G.z,{}),(0,t.jsxs)(l.x,{children:[(0,t.jsx)(Q.C,{children:"Account Setup Incomplete"}),(0,t.jsx)($.X,{children:"Please complete your account setup to receive payments."})]})]}):(0,t.jsxs)(X.b,{status:"info",rounded:"xl",children:[(0,t.jsx)(G.z,{}),(0,t.jsxs)(l.x,{children:[(0,t.jsx)(Q.C,{children:"Connect Your Account"}),(0,t.jsx)($.X,{children:"Connect your Stripe account to receive payments directly. It only takes a few minutes."})]})]}),(0,t.jsx)(l.x,{p:6,bg:v,rounded:"xl",border:"1px solid",borderColor:p,children:(0,t.jsxs)(S.g,{spacing:4,align:"stretch",children:[(0,t.jsxs)(m.U,{justify:"space-between",children:[(0,t.jsx)(d.x,{fontSize:"sm",fontWeight:"600",color:f,children:"Account Status"}),"active"===n.status?(0,t.jsx)(b.C,{colorScheme:"green",px:3,py:1,rounded:"full",fontSize:"xs",children:(0,t.jsxs)(m.U,{spacing:1,children:[(0,t.jsx)(c.J,{as:I._rq,boxSize:3}),(0,t.jsx)(d.x,{children:"Connected"})]})}):"pending"===n.status?(0,t.jsx)(b.C,{colorScheme:"yellow",px:3,py:1,rounded:"full",fontSize:"xs",children:(0,t.jsxs)(m.U,{spacing:1,children:[(0,t.jsx)(c.J,{as:I.bcx,boxSize:3}),(0,t.jsx)(d.x,{children:"Pending"})]})}):(0,t.jsx)(b.C,{colorScheme:"gray",px:3,py:1,rounded:"full",fontSize:"xs",children:"Not Connected"})]}),"active"===n.status&&(0,t.jsxs)(S.g,{align:"start",spacing:2,mt:2,children:[(0,t.jsxs)(m.U,{spacing:2,children:[(0,t.jsx)(c.J,{as:I._rq,boxSize:4,color:"green.500"}),(0,t.jsx)(d.x,{fontSize:"xs",color:j,children:"Details submitted"})]}),(0,t.jsxs)(m.U,{spacing:2,children:[(0,t.jsx)(c.J,{as:I._rq,boxSize:4,color:"green.500"}),(0,t.jsx)(d.x,{fontSize:"xs",color:j,children:"Payments enabled"})]}),(0,t.jsxs)(m.U,{spacing:2,children:[(0,t.jsx)(c.J,{as:I._rq,boxSize:4,color:"green.500"}),(0,t.jsx)(d.x,{fontSize:"xs",color:j,children:"Payouts enabled"})]})]})]})}),(0,t.jsx)(l.x,{children:(0,t.jsx)(d.x,{fontSize:"sm",color:j,mb:4,children:"active"===n.status?"Your account is fully set up and ready to receive payments.":"pending"===n.status?"Complete your account setup to start receiving payments.":"Connect your Stripe account to receive payments directly to your bank account. The setup process is secure and takes just a few minutes."})})]})}),(0,t.jsx)(R.m,{p:6,borderTop:"1px solid",borderColor:p,bg:v,children:(0,t.jsxs)(m.U,{spacing:3,width:"full",children:[(0,t.jsx)(x.z,{variant:"ghost",onClick:o,isDisabled:s||a,flex:1,fontWeight:"600",fontSize:"sm",h:"48px",rounded:"xl",_hover:{bg:y},children:"active"===n.status?"Close":"Cancel"}),"active"!==n.status&&(0,t.jsx)(x.z,{bg:u,color:"white",onClick:h,isLoading:s||a,loadingText:"Setting up...",leftIcon:(0,t.jsx)(c.J,{as:I.AlO}),flex:2,fontWeight:"700",fontSize:"sm",h:"48px",rounded:"xl",_hover:{bg:"#005EA6",transform:"translateY(-2px)",boxShadow:"lg"},_active:{transform:"translateY(0)"},transition:"all 0.2s",children:"pending"===n.status?"Complete Setup":"Connect Account"})]})})]})]})},K=e=>{let{isOpen:r,onClose:o,debt:s,venmoLink:a,venmoWebLink:h,venmoUsername:g,hasVenmoUsername:p,onOpenVenmo:u,onCopyLink:f,onMarkAsPaid:b}=e,j=(0,i.ff)("white","gray.800"),y=(0,i.ff)("gray.200","gray.600"),v="#4A7C59",C=(0,i.ff)("gray.900","gray.100"),w=(0,i.ff)("gray.600","gray.400"),z=(0,i.ff)("gray.100","gray.600"),W=(0,i.ff)("gray.50","gray.700"),[_,k]=(0,n.useState)(!1);return(0,t.jsxs)(O.u_,{isOpen:r,onClose:o,size:"lg",isCentered:!0,children:[(0,t.jsx)(Y.Z,{bg:"blackAlpha.600",backdropFilter:"blur(4px)"}),(0,t.jsxs)(N.h,{bg:j,border:"1px solid",borderColor:y,rounded:"2xl",boxShadow:"0 20px 60px rgba(0,0,0,0.3)",maxW:"500px",children:[(0,t.jsx)(T.x,{color:C,fontSize:"xl",fontWeight:"700",pb:4,borderBottom:"1px solid",borderColor:y,children:(0,t.jsxs)(m.U,{spacing:3,children:[(0,t.jsx)(c.J,{as:I.Wqx,boxSize:6,color:v}),(0,t.jsx)(d.x,{children:"Pay with Venmo"})]})}),(0,t.jsx)(L.o,{color:w,_hover:{color:C,bg:z},rounded:"lg"}),(0,t.jsx)(D.f,{p:8,children:(0,t.jsxs)(S.g,{spacing:6,align:"stretch",children:[s&&(0,t.jsx)(l.x,{p:6,bg:W,rounded:"xl",border:"1px solid",borderColor:y,textAlign:"center",children:(0,t.jsxs)(S.g,{align:"center",spacing:3,children:[(0,t.jsx)(d.x,{fontSize:"sm",color:w,fontWeight:"500",children:"Payment to"}),(0,t.jsx)(d.x,{fontSize:"lg",fontWeight:"700",color:C,children:s.to}),(0,t.jsxs)(d.x,{fontSize:"4xl",fontWeight:"800",color:v,letterSpacing:"-0.02em",children:["$",s.amount.toFixed(2)]})]})}),p?(0,t.jsxs)(X.b,{status:"info",rounded:"xl",children:[(0,t.jsx)(G.z,{}),(0,t.jsxs)(l.x,{children:[(0,t.jsx)(Q.C,{children:"Ready to Pay"}),(0,t.jsxs)($.X,{children:["Pay ",g," directly through Venmo"]})]})]}):(0,t.jsxs)(X.b,{status:"warning",rounded:"xl",children:[(0,t.jsx)(G.z,{}),(0,t.jsxs)(l.x,{children:[(0,t.jsx)(Q.C,{children:"Venmo Username Not Found"}),(0,t.jsxs)($.X,{children:[null==s?void 0:s.to," hasn't added their Venmo username yet. You can still pay them manually through Venmo."]})]})]}),p&&a&&(0,t.jsxs)(S.g,{spacing:4,children:[(0,t.jsx)(x.z,{bg:v,color:"white",onClick:u,leftIcon:(0,t.jsx)(c.J,{as:I.AlO}),size:"lg",w:"full",h:"52px",fontWeight:"700",fontSize:"sm",rounded:"xl",_hover:{bg:"#2D7BB8",transform:"translateY(-2px)",boxShadow:"lg"},_active:{transform:"translateY(0)"},transition:"all 0.2s",children:"Open in Venmo App"}),h&&(0,t.jsx)(x.z,{variant:"outline",onClick:()=>{h&&(navigator.clipboard.writeText(h),k(!0),f(),setTimeout(()=>k(!1),2e3))},leftIcon:(0,t.jsx)(c.J,{as:_?I._rq:I.C3L}),size:"md",w:"full",h:"44px",fontWeight:"600",fontSize:"sm",rounded:"xl",borderColor:y,_hover:{bg:z},children:_?"Link Copied!":"Copy Payment Link"})]}),(0,t.jsx)(l.x,{p:4,bg:W,rounded:"xl",border:"1px solid",borderColor:y,children:(0,t.jsx)(d.x,{fontSize:"xs",color:w,textAlign:"center",children:'After completing the payment in Venmo, click "Mark as Paid" below to update the debt.'})})]})}),(0,t.jsx)(R.m,{p:6,borderTop:"1px solid",borderColor:y,bg:W,children:(0,t.jsxs)(m.U,{spacing:3,width:"full",children:[(0,t.jsx)(x.z,{variant:"ghost",onClick:o,flex:1,fontWeight:"600",fontSize:"sm",h:"48px",rounded:"xl",_hover:{bg:z},children:"Cancel"}),(0,t.jsx)(x.z,{bg:v,color:"white",onClick:b,flex:2,fontWeight:"700",fontSize:"sm",h:"48px",rounded:"xl",_hover:{bg:"#2D7BB8",transform:"translateY(-2px)",boxShadow:"lg"},_active:{transform:"translateY(0)"},transition:"all 0.2s",children:"Mark as Paid"})]})})]})]})},H=e=>{let{isOpen:r,onClose:o,currentUsername:s,onSave:a,isLoading:h}=e,[g,p]=(0,n.useState)(s||""),u=(0,i.ff)("white","gray.800"),f=(0,i.ff)("gray.200","gray.600"),b="#4A7C59",j=(0,i.ff)("gray.900","gray.100"),y=(0,i.ff)("gray.600","gray.400"),v=(0,i.ff)("gray.100","gray.600"),w=(0,i.ff)("gray.50","gray.700"),z=async()=>{if(!g.trim())return;let e=g.trim().replace(/^@/,"");await a(e)};return(0,t.jsxs)(O.u_,{isOpen:r,onClose:o,size:"md",isCentered:!0,children:[(0,t.jsx)(Y.Z,{bg:"blackAlpha.600",backdropFilter:"blur(4px)"}),(0,t.jsxs)(N.h,{bg:u,border:"1px solid",borderColor:f,rounded:"2xl",boxShadow:"0 20px 60px rgba(0,0,0,0.3)",children:[(0,t.jsx)(T.x,{color:j,fontSize:"xl",fontWeight:"700",pb:4,borderBottom:"1px solid",borderColor:f,children:(0,t.jsxs)(m.U,{spacing:3,children:[(0,t.jsx)(c.J,{as:I.Wqx,boxSize:6,color:b}),(0,t.jsx)(d.x,{children:"Venmo Settings"})]})}),(0,t.jsx)(L.o,{color:y,_hover:{color:j,bg:v},rounded:"lg"}),(0,t.jsx)(D.f,{p:8,children:(0,t.jsxs)(S.g,{spacing:6,align:"stretch",children:[(0,t.jsxs)(X.b,{status:"info",rounded:"xl",children:[(0,t.jsx)(G.z,{}),(0,t.jsxs)(l.x,{children:[(0,t.jsx)(Q.C,{children:"Add Your Venmo Username"}),(0,t.jsx)($.X,{fontSize:"xs",children:"This allows others to pay you directly through Venmo. Your username is the part after @ in your Venmo profile."})]})]}),(0,t.jsxs)(l.x,{children:[(0,t.jsx)(C.l,{fontSize:"sm",fontWeight:"600",color:j,mb:2,children:"Venmo Username"}),(0,t.jsx)(_.I,{placeholder:"your-venmo-username",value:g,onChange:e=>p(e.target.value),size:"lg",rounded:"xl",borderColor:f,_focus:{borderColor:b,boxShadow:"0 0 0 1px ".concat(b)}}),(0,t.jsx)(d.x,{fontSize:"xs",color:y,mt:2,children:"Enter your Venmo username (without @). Find it in your Venmo profile."})]}),s&&(0,t.jsx)(l.x,{p:4,bg:w,rounded:"xl",border:"1px solid",borderColor:f,children:(0,t.jsxs)(m.U,{spacing:2,children:[(0,t.jsx)(c.J,{as:I._rq,color:"green.500"}),(0,t.jsxs)(d.x,{fontSize:"sm",color:y,children:["Current: ",(0,t.jsxs)(d.x,{as:"span",fontWeight:"600",color:j,children:["@",s]})]})]})})]})}),(0,t.jsx)(R.m,{p:6,borderTop:"1px solid",borderColor:f,bg:w,children:(0,t.jsxs)(m.U,{spacing:3,width:"full",children:[(0,t.jsx)(x.z,{variant:"ghost",onClick:o,isDisabled:h,flex:1,fontWeight:"600",fontSize:"sm",h:"48px",rounded:"xl",_hover:{bg:v},children:"Cancel"}),(0,t.jsx)(x.z,{bg:b,color:"white",onClick:z,isLoading:h,loadingText:"Saving...",flex:2,fontWeight:"700",fontSize:"sm",h:"48px",rounded:"xl",_hover:{bg:"#2D7BB8",transform:"translateY(-2px)",boxShadow:"lg"},_active:{transform:"translateY(0)"},transition:"all 0.2s",children:"Save Username"})]})})]})]})};var ee=o(5876),er=o(6866);let eo=()=>{let[e,r]=(0,n.useState)(null);return(0,n.useEffect)(()=>{let e=(0,ee.Aj)(er.I8,e=>{r(e)});return()=>e()},[]),{user:e,login:async()=>{try{let e=await (0,ee.rh)(er.I8,er.Ap);return r(e.user),{success:!0,user:e.user}}catch(e){return console.error("Login error:",e),{success:!1,error:e}}},logout:async()=>{try{return await (0,ee.w7)(er.I8),r(null),{success:!0}}catch(e){return console.error("Logout error:",e),{success:!1,error:e}}},isAuthenticated:!!e}},et=e=>{let[r,o]=(0,n.useState)([]),[t,s]=(0,n.useState)(null),[i,l]=(0,n.useState)(!1),[a,c]=(0,n.useState)(""),[d,x]=(0,n.useState)(!0);(0,n.useEffect)(()=>{if(!e){o([]),x(!1);return}x(!0);let r=(0,er.IO)(er.z1,(0,er.ar)("memberIds","array-contains",e.uid)),n=(0,er.cf)(r,e=>{let r=[];e.forEach(e=>{var o;let t=e.data(),n={id:e.id,name:t.name,members:t.members||[],debts:t.debts||[],requests:t.requests||[],createdAt:(null===(o=t.createdAt)||void 0===o?void 0:o.toMillis())||Date.now(),createdBy:t.createdBy,memberIds:t.memberIds||[]};r.push(n),n.members.length>0&&console.log('Server "'.concat(n.name,'" has ').concat(n.members.length," members:"),n.members)}),o(r),x(!1),r.length>0&&!t&&s(r[0].id)},e=>{console.error("Firestore listener error:",e),x(!1)});return()=>n()},[e]);let h=async r=>{if(!r.trim()||!e)return!1;try{let o={name:r.trim(),members:[e.displayName||e.email||"Anonymous"],debts:[],requests:[],createdAt:(0,er.Bt)(),createdBy:e.uid,memberIds:[e.uid]},t=await (0,er.ET)(er.z1,o);return s(t.id),!0}catch(e){return console.error("Error creating server:",e),!1}},g=async e=>{try{if(await (0,er.oe)((0,er.JU)(er.z1,e)),t===e){let o=r.filter(r=>r.id!==e);s(o.length>0?o[0].id:null)}}catch(e){console.error("Error deleting server:",e)}},p=async(e,r,o)=>{if(!r.trim())return!1;try{let t=(0,er.JU)(er.z1,e),n=await (0,er.QT)(t);if(!n.exists())return!1;let s=n.data(),i=(null==s?void 0:s.members)||[],l=(null==s?void 0:s.memberIds)||[];if(i.includes(r.trim()))return!1;let a={members:(0,er.vr)(r.trim())};return o&&!l.includes(o)&&(a.memberIds=(0,er.vr)(o)),await (0,er.r7)(t,a),!0}catch(e){return console.error("Error adding member:",e),!1}},u=async(e,r,o,t)=>{if(!r||!o||!t||t<=0)return!1;try{let n=(0,er.JU)(er.z1,e);return await (0,er.r7)(n,{debts:(0,er.vr)({from:r,to:o,amount:t})}),!0}catch(e){return console.error("Error adding debt:",e),!1}},f=async e=>{let o=r.find(r=>r.id===e);if(!o)return;let t={};o.debts.forEach(e=>{let{from:r,to:o,amount:n}=e;t[r]=(t[r]||0)-n,t[o]=(t[o]||0)+n});let n=Object.entries(t).filter(e=>{let[r,o]=e;return o<0}),s=Object.entries(t).filter(e=>{let[r,o]=e;return o>0}),i=[],l=0,a=0;for(;l<n.length&&a<s.length;){let[e,r]=n[l],[o,t]=s[a],c=Math.min(-r,t);i.push({from:e,to:o,amount:c}),n[l][1]+=c,s[a][1]-=c,0===n[l][1]&&l++,0===s[a][1]&&a++}try{let r=(0,er.JU)(er.z1,e);await (0,er.r7)(r,{debts:i})}catch(e){console.error("Error simplifying debts:",e)}},m=async(e,r)=>{try{let o=(0,er.JU)(er.z1,e);await (0,er.r7)(o,{requests:(0,er.vr)(r)})}catch(e){console.error("Error adding request:",e)}},b=async(e,o,t)=>{try{let n=r.find(r=>r.id===e);if(!n)return;let s=n.requests.map(e=>e.id===o?{...e,status:t}:e),i=(0,er.JU)(er.z1,e);await (0,er.r7)(i,{requests:s})}catch(e){console.error("Error updating request:",e)}},j=async(e,o)=>{let t=r.find(r=>r.id===e);if(!t)return;let n=t.requests.find(e=>e.id===o);if(n)try{let r=(0,er.JU)(er.z1,e),s=t.requests.map(e=>e.id===o?{...e,status:"approved"}:e),i={from:n.to,to:n.from,amount:n.amount};await (0,er.r7)(r,{requests:s,debts:(0,er.vr)(i)})}catch(e){console.error("Error approving request:",e)}},y=async(e,o)=>{let t=r.find(r=>r.id===e);if(t)try{let r=t.debts[o];if(!r)return;let n=(0,er.JU)(er.z1,e);await (0,er.r7)(n,{debts:(0,er.Ab)(r)})}catch(e){console.error("Error removing debt:",e)}},S=r.find(e=>e.id===t);return{servers:r,selectedServerId:t,currentServer:S,isCreatingServer:i,newServerName:a,loading:d,setSelectedServerId:s,setIsCreatingServer:l,setNewServerName:c,createServer:h,deleteServer:g,addMember:p,addDebt:u,simplifyDebts:f,addRequest:m,updateRequest:b,approveRequest:j,removeDebt:y}},en=()=>{let[e,r]=(0,n.useState)(null),[o,t]=(0,n.useState)("stripe"),[s,i]=(0,n.useState)(!1),[l,a]=(0,n.useState)(null),c=async(e,r,o,t)=>{let n=await fetch("/api/create-payment-intent",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:e.amount,description:"Payment from ".concat(e.from," to ").concat(e.to),metadata:{from:e.from,to:e.to,serverId:r||"",userId:o,recipientUserId:t||"",debtIndex:e.index.toString()},successUrl:"".concat(window.location.origin,"/?payment=success&debtIndex=").concat(e.index),cancelUrl:"".concat(window.location.origin,"/?payment=cancelled")})}),{url:s,sessionId:i,error:l}=await n.json();if(l)throw Error(l);if(!s)throw Error("Failed to create checkout session");window.location.href=s},d=async(e,r,o)=>{let t=await o(e.amount,r,e.to,"Payment from ".concat(e.from," to ").concat(e.to));return a(t),i(!1),t},x=async(t,n,s,l,a)=>{if(e){i(!0);try{if("stripe"===o)await c(e,t,n,a||void 0);else if("venmo"===o){if(l)await d(e,a||null,l);else throw Error("Venmo link generator not available")}else"paypal"===o&&setTimeout(()=>{s(e.index),i(!1),r(null)},2e3)}catch(e){throw console.error("Payment error:",e),i(!1),e}}},h=()=>{r(null),i(!1),a(null)};return{selectedDebt:e,paymentProvider:o,isProcessingPayment:s,venmoPaymentData:l,setPaymentProvider:t,initiatePayment:(e,o)=>{r({...e,index:o})},processPayment:x,closePaymentModal:h,markVenmoAsPaid:r=>{e&&(r(e.index),h())}}},es=()=>{let{user:e}=eo(),[r,o]=(0,n.useState)({hasAccount:!1,status:"none"}),[t,s]=(0,n.useState)(!1),[i,l]=(0,n.useState)(!1),a=async()=>{if(!e){o({hasAccount:!1,status:"none"});return}s(!0);try{let r=await fetch("/api/stripe/check-account-status",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e.uid})}),t=await r.json();r.ok?o(t):console.error("Error checking account status:",t.error)}catch(e){console.error("Error checking account status:",e)}finally{s(!1)}},c=async()=>{if(!e)return null;l(!0);try{let r=await fetch("/api/stripe/create-connect-account",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e.uid,email:e.email||"",name:e.displayName||e.email||"User"})}),o=await r.json();if(r.ok)return await a(),o.accountId;throw Error(o.error||"Failed to create account")}catch(e){throw console.error("Error creating account:",e),e}finally{l(!1)}},d=async r=>{if(!e)return null;try{let o=await fetch("/api/stripe/get-account-link",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e.uid,accountId:r})}),t=await o.json();if(o.ok)return t.url;throw Error(t.error||"Failed to get account link")}catch(e){throw console.error("Error getting account link:",e),e}},x=async()=>{try{let e=r.accountId;if(!e&&!(e=await c()))throw Error("Failed to create account");let o=await d(e);if(!o)throw Error("Failed to get account link");window.location.href=o}catch(e){throw console.error("Error connecting account:",e),e}};return(0,n.useEffect)(()=>{e&&a()},[e]),{accountStatus:r,isLoading:t,isCreatingAccount:i,checkAccountStatus:a,createAccount:c,connectAccount:x}},ei=()=>{let{user:e}=eo(),[r,o]=(0,n.useState)(null),[t,s]=(0,n.useState)(!1),i=async()=>{if(!e){o(null);return}s(!0);try{let r=await fetch("/api/venmo/get-username",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e.uid})}),t=await r.json();r.ok?o(t.username):console.error("Error fetching Venmo username:",t.error)}catch(e){console.error("Error fetching Venmo username:",e)}finally{s(!1)}},l=async r=>{if(e){s(!0);try{let t=await fetch("/api/venmo/save-username",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e.uid,username:r})}),n=await t.json();if(t.ok)return o(n.username),{success:!0};throw Error(n.error||"Failed to save username")}catch(e){throw console.error("Error saving Venmo username:",e),e}finally{s(!1)}}},a=async(e,r,o,t)=>{try{let n=await fetch("/api/venmo/generate-payment-link",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:e,recipientUserId:r,recipientName:o,note:t||"Payment to ".concat(o)})}),s=await n.json();if(n.ok)return s;throw Error(s.error||"Failed to generate payment link")}catch(e){throw console.error("Error generating Venmo link:",e),e}};return(0,n.useEffect)(()=>{e&&i()},[e]),{venmoUsername:r,isLoading:t,fetchUsername:i,saveUsername:l,generatePaymentLink:a}};function el(){let[e,r]=(0,n.useState)(""),[o,A]=(0,n.useState)(""),[U,J]=(0,n.useState)(!1),[F,O]=(0,n.useState)(""),[Y,N]=(0,n.useState)(""),[T,L]=(0,n.useState)(""),[D,B]=(0,n.useState)(""),[V,R]=(0,n.useState)(""),[X,G]=(0,n.useState)(!0),{user:Q,login:$,logout:ee}=eo(),{servers:er,selectedServerId:el,currentServer:ea,isCreatingServer:ec,newServerName:ed,setSelectedServerId:ex,setIsCreatingServer:eh,setNewServerName:eg,createServer:ep,deleteServer:eu,addMember:ef,addDebt:em,simplifyDebts:eb,addRequest:ej,updateRequest:ey,approveRequest:eS,removeDebt:ev}=et(Q),{selectedDebt:eC,paymentProvider:ew,isProcessingPayment:ez,venmoPaymentData:eW,setPaymentProvider:e_,initiatePayment:ek,processPayment:eI,closePaymentModal:eA,markVenmoAsPaid:eE}=en(),{accountStatus:eU,isLoading:eJ,isCreatingAccount:eP,connectAccount:eF}=es(),{venmoUsername:eq,isLoading:eO,saveUsername:eY,generatePaymentLink:eN}=ei(),{isOpen:eT,onOpen:eL,onClose:eD}=(0,E.q)(),{isOpen:eB,onOpen:eV,onClose:eR}=(0,E.q)(),{isOpen:eM,onOpen:eX,onClose:eG}=(0,E.q)(),{isOpen:eQ,onOpen:e$,onClose:eZ}=(0,E.q)(),eK=(0,s.p)(),eH=(null==ea?void 0:ea.members)||[],e0=(null==ea?void 0:ea.debts)||[],e2=(null==ea?void 0:ea.requests)||[];(0,n.useEffect)(()=>{ea&&console.log("Current server members updated:",{serverName:ea.name,memberCount:eH.length,members:eH})},[null==ea?void 0:ea.members,eH.length]);let e1=e2.filter(e=>e.to===((null==Q?void 0:Q.displayName)||(null==Q?void 0:Q.email))&&"pending"===e.status),e4=e2.filter(e=>e.from===((null==Q?void 0:Q.displayName)||(null==Q?void 0:Q.email))&&"pending"===e.status);(0,n.useEffect)(()=>{let e=new URLSearchParams(window.location.search),r=e.get("payment"),o=e.get("debtIndex");"success"===r&&null!==o?(rr(parseInt(o)),eK({title:"Payment successful!",description:"Your payment has been processed successfully",status:"success",duration:5e3,isClosable:!0}),window.history.replaceState({},"",window.location.pathname)):"cancelled"===r&&(eK({title:"Payment cancelled",description:"Your payment was cancelled",status:"info",duration:3e3,isClosable:!0}),window.history.replaceState({},"",window.location.pathname))},[]);let e3=async()=>{if(!ed.trim()){eK({title:"Invalid name",description:"Please enter a server name",status:"warning",duration:2e3,isClosable:!0});return}await ep(ed.trim())&&(eg(""),eh(!1),eK({title:"Server created",status:"success",duration:2e3,isClosable:!0}))},e6=async()=>{let e=await $();e.success&&e.user?eK({title:"Login successful",description:"Welcome ".concat(e.user.displayName),status:"success",duration:3e3,isClosable:!0}):eK({title:"Login failed",status:"error",duration:3e3,isClosable:!0})},e5=async()=>{await ee(),eK({title:"Logged out",status:"info",duration:3e3,isClosable:!0})},e8=async()=>{if(ea&&el&&Q){if(!F||!Y||isNaN(parseFloat(Y))||0>=parseFloat(Y)){eK({title:"Invalid input",description:"Please select valid friends and amount",status:"warning",duration:3e3,isClosable:!0});return}await em(el,Q.displayName||Q.email||"You",F,parseFloat(Y))&&(O(""),N(""),eK({title:"Expense added",description:"Successfully recorded expense of $".concat(parseFloat(Y).toFixed(2)),status:"success",duration:2e3,isClosable:!0}))}},e7=async()=>{if(!Q||!ea||!o.trim()||!el){console.error("Missing required data for invitation:",{user:!!Q,currentServer:!!ea,inviteEmail:o.trim(),selectedServerId:el}),el||eK({title:"No server selected",description:"Please select a server first",status:"warning",duration:3e3,isClosable:!0});return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o.trim())){eK({title:"Invalid email",description:"Please enter a valid email address",status:"warning",duration:3e3,isClosable:!0});return}J(!0);try{let e="http://localhost:3000/join?email=".concat(encodeURIComponent(o.trim()),"&serverId=").concat(encodeURIComponent(el||""));console.log("Generating invite link:",{email:o.trim(),serverId:el,inviteLink:e,selectedServerIdType:typeof el});let r=await fetch("/api/send-invite",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({to:o.trim(),inviteLink:e,serverName:ea.name,serverId:el,senderName:Q.displayName||Q.email||"Someone"})});if(!r.ok){let e=await r.json();throw Error(e.message||"Failed to send invitation email")}await r.json(),eK({title:"Invitation sent!",description:"An email has been sent to ".concat(o),status:"success",duration:5e3,isClosable:!0}),A("")}catch(e){console.error("Error sending invitation:",e),eK({title:"Failed to send invitation",description:e.message||"An error occurred while sending the invitation",status:"error",duration:5e3,isClosable:!0})}finally{J(!1)}},e9=async(e,r)=>{ek(e,r),eL()},re=async()=>{if(Q&&eC&&ea)try{let e;let r=ea.members.findIndex(e=>e===eC.to);if(r>=0&&ea.memberIds&&ea.memberIds[r]&&(e=ea.memberIds[r]),"stripe"===ew){let r=async()=>{let r=await fetch("/api/create-payment-intent",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:eC.amount,description:"Payment from ".concat(eC.from," to ").concat(eC.to),metadata:{from:eC.from,to:eC.to,serverId:el||"",userId:Q.uid,recipientUserId:e||"",debtIndex:eC.index.toString()},successUrl:"".concat(window.location.origin,"/?payment=success&debtIndex=").concat(eC.index),cancelUrl:"".concat(window.location.origin,"/?payment=cancelled")})}),{url:o,sessionId:t,error:n,recipientHasAccount:s}=await r.json();if(n)throw Error(n);if(!o)throw Error("Failed to create checkout session");s||eK({title:"Recipient not set up",description:"".concat(eC.to," hasn't connected their Stripe account. Payment will go to your account."),status:"warning",duration:5e3,isClosable:!0}),window.location.href=o};eD(),eA(),await r()}else if("venmo"===ew){eD();try{await eI(el,Q.uid,e=>{ev(el,e)},eN,e||null),eX()}catch(e){eK({title:"Venmo payment failed",description:e.message||"Failed to generate Venmo payment link",status:"error",duration:5e3,isClosable:!0})}}else"paypal"===ew&&eK({title:"PayPal Payment",description:"PayPal integration coming soon...",status:"info",duration:3e3})}catch(e){console.error("Payment error:",e),eK({title:"Payment failed",description:e.message||"An error occurred processing your payment",status:"error",duration:5e3,isClosable:!0})}},rr=e=>{el&&(ev(el,e),eK({title:"Payment successful",description:"Debt has been marked as paid",status:"success",duration:3e3,isClosable:!0}))},ro=async()=>{if(!ea||!Q)return;if(!T||!D||isNaN(parseFloat(D))||0>=parseFloat(D)){eK({title:"Invalid input",description:"Please select a person and enter a valid amount",status:"warning",duration:3e3,isClosable:!0});return}let e={id:Date.now().toString(),from:Q.displayName||Q.email||"You",to:T,amount:parseFloat(D),description:V.trim()||void 0,status:"pending",createdAt:Date.now()};el&&await ej(el,e),L(""),B(""),R(""),eK({title:"Request sent",description:"Request sent to ".concat(T),status:"success",duration:2e3,isClosable:!0})},rt=async e=>{el&&(await ey(el,e,"rejected"),eK({title:"Request rejected",status:"info",duration:2e3,isClosable:!0}))},rn="#4A7C59",rs="#3D6B4A",ri="#E8F5E8",rl=(0,i.ff)("#F8F9FA","#1A202C"),ra=(0,i.ff)("#FFFFFF","#2D3748"),rc=(0,i.ff)("#E2E8F0","#4A5568"),rd=(0,i.ff)("#F7FAFC","#2D3748"),rx=(0,i.ff)("#EDF2F7","#4A5568"),rh=(0,i.ff)("#1A202C","#F7FAFC"),rg=(0,i.ff)("#718096","#A0AEC0"),rp=(0,i.ff)("#2D3748","#E2E8F0"),ru="#00A86B",rf="#E53E3E",rm="#FFB800";return(0,t.jsxs)(l.x,{minHeight:"100vh",bg:rl,position:"relative",display:"flex",children:[(0,t.jsx)(P,{servers:er,selectedServerId:el,isCreatingServer:ec,newServerName:ed,user:Q,sidebarOpen:X,onToggleSidebar:()=>G(!X),onCreateServer:e3,onStartCreateServer:()=>eh(!0),onCancelCreateServer:()=>{eh(!1),eg("")},onNewServerNameChange:eg,onServerSelect:ex,onDeleteServer:e=>{eu(e),eK({title:"Server deleted",status:"info",duration:2e3,isClosable:!0})},onLogin:e6,onLogout:e5}),(0,t.jsxs)(l.x,{flex:1,display:"flex",flexDirection:"column",minW:0,children:[(0,t.jsx)(q,{currentServer:ea,user:Q,sidebarOpen:X,onToggleSidebar:()=>G(!X),onLogin:e6,onStripeConnect:eV,stripeAccountStatus:eU.status,onVenmoSettings:e$,hasVenmoUsername:!!eq}),(0,t.jsx)(l.x,{flex:1,overflowY:"auto",children:ea?(0,t.jsx)(a.W,{maxW:"1200px",px:{base:4,md:6},py:{base:8,md:10},children:(0,t.jsxs)(h.Z,{bg:ra,border:"1px solid",borderColor:rc,shadow:"0 1px 3px rgba(0,0,0,0.1)",rounded:"xl",overflow:"hidden",children:[(0,t.jsx)(g.e,{p:0,children:(0,t.jsxs)(p.m,{variant:"unstyled",size:"md",children:[(0,t.jsxs)(u.t,{borderBottom:"1px solid",borderColor:rc,px:8,pt:6,bg:ra,children:[(0,t.jsx)(f.O,{_selected:{color:rn,borderBottom:"3px solid ".concat(rn),fontWeight:"700"},color:rg,fontWeight:"500",fontSize:"sm",px:5,py:4,mr:6,borderBottom:"3px solid transparent",transition:"all 0.2s",_hover:{color:rh},children:(0,t.jsxs)(m.U,{spacing:2.5,children:[(0,t.jsx)(c.J,{as:I.oQC,boxSize:4.5}),(0,t.jsx)(d.x,{children:"Expenses"})]})}),(0,t.jsx)(f.O,{_selected:{color:rn,borderBottom:"3px solid ".concat(rn),fontWeight:"700"},color:rg,fontWeight:"500",fontSize:"sm",px:5,py:4,mr:6,borderBottom:"3px solid transparent",transition:"all 0.2s",_hover:{color:rh},children:(0,t.jsxs)(m.U,{spacing:2.5,children:[(0,t.jsx)(c.J,{as:I.QqI,boxSize:4.5}),(0,t.jsx)(d.x,{children:"Debts"})]})}),(0,t.jsx)(f.O,{_selected:{color:rn,borderBottom:"3px solid ".concat(rn),fontWeight:"700"},color:rg,fontWeight:"500",fontSize:"sm",px:5,py:4,mr:6,borderBottom:"3px solid transparent",transition:"all 0.2s",_hover:{color:rh},children:(0,t.jsxs)(m.U,{spacing:2.5,children:[(0,t.jsx)(c.J,{as:I.WY8,boxSize:4.5}),(0,t.jsx)(d.x,{children:"Group"})]})}),(0,t.jsx)(f.O,{_selected:{color:rn,borderBottom:"3px solid ".concat(rn),fontWeight:"700"},color:rg,fontWeight:"500",fontSize:"sm",px:5,py:4,borderBottom:"3px solid transparent",transition:"all 0.2s",_hover:{color:rh},children:(0,t.jsxs)(m.U,{spacing:2.5,children:[(0,t.jsx)(c.J,{as:I.LbG,boxSize:4.5}),(0,t.jsx)(d.x,{children:"Requests"}),e1.length>0&&(0,t.jsx)(b.C,{bg:rn,color:"white",fontSize:"xs",rounded:"full",px:2,py:.5,fontWeight:"700",children:e1.length})]})})]}),(0,t.jsxs)(j.n,{children:[(0,t.jsx)(y.x,{px:8,py:10,children:(0,t.jsxs)(S.g,{spacing:8,maxW:"600px",mx:"auto",align:"stretch",children:[Q?(0,t.jsx)(l.x,{p:5,bg:rd,rounded:"lg",border:"1px solid",borderColor:rc,children:(0,t.jsxs)(m.U,{spacing:4,children:[(0,t.jsx)(v.q,{src:null==Q?void 0:Q.photoURL,name:null==Q?void 0:Q.displayName,size:"md",border:"2px solid ".concat(rc)}),(0,t.jsxs)(S.g,{align:"start",spacing:.5,children:[(0,t.jsx)(d.x,{fontSize:"md",color:rh,fontWeight:"600",children:Q.displayName}),(0,t.jsx)(d.x,{fontSize:"xs",color:rg,fontWeight:"400",children:"You're adding an expense"})]})]})}):(0,t.jsxs)(l.x,{p:12,bg:rd,rounded:"2xl",border:"1px solid",borderColor:rc,textAlign:"center",children:[(0,t.jsx)(c.J,{as:I._fJ,boxSize:10,color:rg,opacity:.5,mb:4}),(0,t.jsx)(d.x,{fontSize:"md",fontWeight:"600",color:rh,mb:2,children:"Sign in to add expenses"}),(0,t.jsx)(d.x,{fontSize:"sm",color:rg,mb:6,children:"Connect your Google account to get started"}),(0,t.jsx)(x.z,{leftIcon:(0,t.jsx)(c.J,{as:I._fJ}),onClick:e6,bg:rn,color:"white",size:"lg",px:8,h:"48px",fontWeight:"600",fontSize:"sm",rounded:"xl",_hover:{bg:rs,transform:"translateY(-2px)",boxShadow:"lg"},_active:{transform:"translateY(0)"},transition:"all 0.2s",children:"Sign in with Google"})]}),Q&&ea&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(l.x,{children:[(0,t.jsx)(C.l,{fontSize:"sm",fontWeight:"600",color:rh,mb:3,children:"Who paid for this?"}),(0,t.jsx)(w.P,{placeholder:"Select a group member",value:F,onChange:e=>O(e.target.value),bg:ra,color:rh,size:"lg",h:"52px",border:"2px solid",borderColor:rc,rounded:"xl",fontSize:"sm",_hover:{borderColor:rn},_focus:{borderColor:rn,boxShadow:"0 0 0 3px ".concat(ri)},children:0===eH.length?(0,t.jsx)("option",{disabled:!0,children:"No group members yet"}):eH.map((e,r)=>(0,t.jsx)("option",{value:e,children:e},r))})]}),(0,t.jsxs)(l.x,{children:[(0,t.jsx)(C.l,{fontSize:"sm",fontWeight:"600",color:rh,mb:3,children:"Amount"}),(0,t.jsx)(z.Y2,{value:Y,onChange:e=>N(e),precision:2,min:0,w:"full",children:(0,t.jsxs)(m.U,{spacing:2,align:"center",children:[(0,t.jsx)(d.x,{fontSize:"2xl",fontWeight:"700",color:rh,px:1,children:"$"}),(0,t.jsx)(z.zu,{placeholder:"0.00",bg:ra,color:rh,border:"2px solid",borderColor:rc,rounded:"xl",h:"52px",fontSize:"lg",fontWeight:"600",_hover:{borderColor:rn},_focus:{borderColor:rn,boxShadow:"0 0 0 3px ".concat(ri)}})]})})]}),(0,t.jsx)(x.z,{leftIcon:(0,t.jsx)(c.J,{as:I.OvN}),bg:rn,color:"white",size:"lg",width:"full",fontWeight:"700",fontSize:"sm",h:"52px",rounded:"xl",_hover:{bg:rs,transform:"translateY(-2px)",boxShadow:"lg"},_active:{transform:"translateY(0)"},onClick:e8,isDisabled:!F||!Y||0===eH.length,transition:"all 0.2s",children:"Add Expense"})]})]})}),(0,t.jsx)(y.x,{px:8,py:10,children:(0,t.jsx)(S.g,{spacing:5,maxW:"800px",mx:"auto",align:"stretch",children:0===e0.length?(0,t.jsxs)(l.x,{textAlign:"center",py:16,px:8,children:[(0,t.jsx)(c.J,{as:I.QqI,boxSize:12,color:rg,opacity:.3,mb:4}),(0,t.jsx)(d.x,{fontSize:"lg",fontWeight:"600",color:rh,mb:2,children:"No expenses yet"}),(0,t.jsx)(d.x,{fontSize:"sm",color:rg,children:"Add expenses in the Expenses tab to see them here"})]}):(0,t.jsxs)(t.Fragment,{children:[e0.map((e,r)=>(0,t.jsx)(l.x,{p:6,bg:ra,border:"1px solid",borderColor:rc,rounded:"2xl",_hover:{borderColor:rn,boxShadow:"0 4px 12px rgba(0,0,0,0.08)",transform:"translateY(-2px)"},transition:"all 0.2s",children:(0,t.jsxs)(S.g,{spacing:4,align:"stretch",children:[(0,t.jsxs)(m.U,{justify:"space-between",align:"start",children:[(0,t.jsx)(S.g,{align:"start",spacing:2,flex:1,children:(0,t.jsxs)(m.U,{spacing:3,children:[(0,t.jsx)(l.x,{w:"12px",h:"12px",bg:rn,rounded:"full",flexShrink:0,mt:1}),(0,t.jsxs)(S.g,{align:"start",spacing:1,children:[(0,t.jsxs)(d.x,{fontSize:"md",color:rh,fontWeight:"600",children:[e.from," owes ",e.to]}),(0,t.jsxs)(d.x,{fontSize:"xs",color:rg,fontWeight:"400",children:["Expense #",r+1]})]})]})}),(0,t.jsxs)(d.x,{fontSize:"2xl",fontWeight:"700",color:rh,children:["$",e.amount.toFixed(2)]})]}),Q&&(0,t.jsx)(x.z,{leftIcon:(0,t.jsx)(c.J,{as:I.XiQ}),onClick:()=>e9(e,r),bg:rn,color:"white",size:"md",width:"full",fontWeight:"600",fontSize:"sm",h:"48px",rounded:"xl",_hover:{bg:rs,transform:"translateY(-2px)",boxShadow:"lg"},_active:{transform:"translateY(0)"},transition:"all 0.2s",children:"Pay Now"})]})},r)),(0,t.jsx)(W.i,{borderColor:rc,my:2}),(0,t.jsx)(x.z,{leftIcon:(0,t.jsx)(c.J,{as:I._rq}),bg:rn,color:"white",size:"lg",width:"full",fontWeight:"700",fontSize:"sm",h:"52px",rounded:"xl",_hover:{bg:rs,transform:"translateY(-2px)",boxShadow:"lg"},_active:{transform:"translateY(0)"},onClick:()=>el&&eb(el),transition:"all 0.2s",children:"Simplify All Debts"})]})})}),(0,t.jsx)(y.x,{px:6,py:8,children:Q?(0,t.jsxs)(S.g,{spacing:6,maxW:"700px",mx:"auto",align:"stretch",children:[(0,t.jsxs)(l.x,{children:[(0,t.jsx)(C.l,{fontSize:"xs",fontWeight:"600",color:rp,mb:2,textTransform:"uppercase",letterSpacing:"0.05em",children:"Invite Member"}),(0,t.jsxs)(m.U,{spacing:2,children:[(0,t.jsx)(_.I,{placeholder:"Enter email address",value:o,onChange:e=>A(e.target.value),onKeyPress:e=>{"Enter"===e.key&&e7()},type:"email",bg:ra,color:rh,size:"md",border:"1px solid",borderColor:rc,_hover:{borderColor:rn},_focus:{borderColor:rn,boxShadow:"0 0 0 1px ".concat(rn)}}),(0,t.jsx)(x.z,{leftIcon:(0,t.jsx)(c.J,{as:I.LbG}),bg:rn,color:"white",size:"md",px:6,fontWeight:"600",fontSize:"sm",rounded:"lg",h:"44px",_hover:{bg:rs,transform:"translateY(-2px)",boxShadow:"lg"},_active:{transform:"translateY(0)"},transition:"all 0.2s",onClick:e7,isDisabled:!o.trim()||U,isLoading:U,loadingText:"Sending...",children:"Send Invite"})]}),(0,t.jsx)(d.x,{fontSize:"xs",color:rg,mt:2,children:"Send an email invitation to add someone to this group"})]}),eH.length>0&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(W.i,{borderColor:rc}),(0,t.jsxs)(l.x,{children:[(0,t.jsxs)(d.x,{fontSize:"sm",fontWeight:"600",color:rh,mb:4,children:["Group Members (",eH.length,")"]}),(0,t.jsx)(d.x,{fontSize:"xs",color:rg,mb:4,children:"Members who have accepted their email invitations"}),(0,t.jsx)(S.g,{spacing:3,align:"stretch",children:eH.map((e,r)=>(0,t.jsxs)(m.U,{spacing:4,p:4,bg:rd,rounded:"xl",border:"1px solid",borderColor:rc,_hover:{bg:rx,borderColor:rn,transform:"translateX(4px)"},transition:"all 0.2s",children:[(0,t.jsx)(v.q,{name:e,bg:rn,color:"white",size:"md",fontWeight:"700"}),(0,t.jsx)(d.x,{fontSize:"md",fontWeight:"600",color:rh,children:e})]},"".concat(e,"-").concat(r)))})]})]}),0===eH.length&&(0,t.jsxs)(l.x,{textAlign:"center",py:12,px:8,bg:rd,rounded:"2xl",border:"2px dashed",borderColor:rc,children:[(0,t.jsx)(c.J,{as:I.WY8,boxSize:10,color:rg,opacity:.3,mb:4}),(0,t.jsx)(d.x,{fontSize:"md",fontWeight:"600",color:rh,mb:2,children:"No members yet"}),(0,t.jsx)(d.x,{fontSize:"sm",color:rg,children:"Add your first group member above"})]})]}):(0,t.jsxs)(l.x,{textAlign:"center",py:16,px:8,maxW:"500px",mx:"auto",children:[(0,t.jsx)(c.J,{as:I._fJ,boxSize:12,color:rg,opacity:.3,mb:4}),(0,t.jsx)(d.x,{fontSize:"lg",fontWeight:"600",color:rh,mb:2,children:"Sign in required"}),(0,t.jsx)(d.x,{fontSize:"sm",color:rg,mb:8,children:"Please sign in to manage group members"}),(0,t.jsx)(x.z,{leftIcon:(0,t.jsx)(c.J,{as:I._fJ}),onClick:e6,bg:rn,color:"white",size:"lg",px:8,h:"52px",fontWeight:"700",fontSize:"sm",rounded:"xl",_hover:{bg:rs,transform:"translateY(-2px)",boxShadow:"lg"},_active:{transform:"translateY(0)"},transition:"all 0.2s",children:"Sign in with Google"})]})}),(0,t.jsx)(y.x,{px:8,py:10,children:Q?(0,t.jsxs)(S.g,{spacing:8,maxW:"800px",mx:"auto",align:"stretch",children:[(0,t.jsx)(l.x,{p:8,bg:rd,rounded:"2xl",border:"1px solid",borderColor:rc,children:(0,t.jsxs)(S.g,{spacing:6,align:"stretch",children:[(0,t.jsxs)(S.g,{align:"start",spacing:1,children:[(0,t.jsx)(d.x,{fontSize:"lg",fontWeight:"700",color:rh,children:"Request Money"}),(0,t.jsx)(d.x,{fontSize:"sm",color:rg,children:"Send a payment request to a group member"})]}),(0,t.jsxs)(l.x,{children:[(0,t.jsx)(C.l,{fontSize:"sm",fontWeight:"600",color:rh,mb:3,children:"Request from"}),(0,t.jsx)(w.P,{placeholder:"Select a group member",value:T,onChange:e=>L(e.target.value),bg:ra,color:rh,size:"lg",h:"52px",border:"2px solid",borderColor:rc,rounded:"xl",fontSize:"sm",_hover:{borderColor:rn},_focus:{borderColor:rn,boxShadow:"0 0 0 3px ".concat(ri)},children:eH.filter(e=>e!==((null==Q?void 0:Q.displayName)||(null==Q?void 0:Q.email))).map((e,r)=>(0,t.jsx)("option",{value:e,children:e},r))})]}),(0,t.jsxs)(l.x,{children:[(0,t.jsx)(C.l,{fontSize:"sm",fontWeight:"600",color:rh,mb:3,children:"Amount"}),(0,t.jsx)(z.Y2,{value:D,onChange:e=>B(e),precision:2,min:0,w:"full",children:(0,t.jsxs)(m.U,{spacing:2,align:"center",children:[(0,t.jsx)(d.x,{fontSize:"2xl",fontWeight:"700",color:rh,px:1,children:"$"}),(0,t.jsx)(z.zu,{placeholder:"0.00",bg:ra,color:rh,border:"2px solid",borderColor:rc,rounded:"xl",h:"52px",fontSize:"lg",fontWeight:"600",_hover:{borderColor:rn},_focus:{borderColor:rn,boxShadow:"0 0 0 3px ".concat(ri)}})]})})]}),(0,t.jsxs)(l.x,{children:[(0,t.jsxs)(C.l,{fontSize:"sm",fontWeight:"600",color:rh,mb:3,children:["Description ",(0,t.jsx)(d.x,{as:"span",color:rg,fontWeight:"400",children:"(optional)"})]}),(0,t.jsx)(_.I,{placeholder:"What is this request for?",value:V,onChange:e=>R(e.target.value),bg:ra,color:rh,size:"lg",h:"52px",border:"2px solid",borderColor:rc,rounded:"xl",fontSize:"sm",_hover:{borderColor:rn},_focus:{borderColor:rn,boxShadow:"0 0 0 3px ".concat(ri)}})]}),(0,t.jsx)(x.z,{leftIcon:(0,t.jsx)(c.J,{as:I.LbG}),bg:rn,color:"white",size:"lg",width:"full",fontWeight:"700",fontSize:"sm",h:"52px",rounded:"xl",_hover:{bg:rs,transform:"translateY(-2px)",boxShadow:"lg"},_active:{transform:"translateY(0)"},onClick:ro,isDisabled:!T||!D||0===eH.length,transition:"all 0.2s",children:"Send Request"})]})}),(0,t.jsx)(W.i,{borderColor:rc}),e1.length>0&&(0,t.jsxs)(l.x,{children:[(0,t.jsxs)(d.x,{fontSize:"md",fontWeight:"700",color:rh,mb:5,children:["Pending Requests (",e1.length,")"]}),(0,t.jsx)(S.g,{spacing:4,align:"stretch",children:e1.map(e=>(0,t.jsx)(l.x,{p:6,bg:ra,border:"2px solid",borderColor:rn,rounded:"2xl",boxShadow:"0 2px 8px rgba(0,112,186,0.1)",children:(0,t.jsxs)(S.g,{spacing:4,align:"stretch",children:[(0,t.jsxs)(m.U,{justify:"space-between",align:"start",children:[(0,t.jsxs)(S.g,{align:"start",spacing:2,flex:1,children:[(0,t.jsxs)(d.x,{fontSize:"lg",fontWeight:"700",color:rh,children:[e.from," requests $",e.amount.toFixed(2)]}),e.description&&(0,t.jsx)(d.x,{fontSize:"sm",color:rg,fontWeight:"400",children:e.description})]}),(0,t.jsx)(b.C,{bg:rn,color:"white",fontSize:"xs",px:3,py:1.5,fontWeight:"700",rounded:"full",children:"Pending"})]}),(0,t.jsxs)(m.U,{spacing:3,children:[(0,t.jsx)(x.z,{leftIcon:(0,t.jsx)(c.J,{as:I.UgA}),onClick:()=>el&&eS(el,e.id),bg:ru,color:"white",size:"md",flex:1,fontWeight:"700",fontSize:"sm",h:"48px",rounded:"xl",_hover:{bg:"#008A5A",transform:"translateY(-2px)",boxShadow:"lg"},_active:{transform:"translateY(0)"},transition:"all 0.2s",children:"Approve"}),(0,t.jsx)(x.z,{leftIcon:(0,t.jsx)(c.J,{as:I.$Rx}),onClick:()=>rt(e.id),variant:"outline",size:"md",flex:1,borderColor:rc,color:rh,fontWeight:"600",fontSize:"sm",h:"48px",rounded:"xl",_hover:{bg:rx,borderColor:rf,color:rf},transition:"all 0.2s",children:"Reject"})]})]})},e.id))})]}),e4.length>0&&(0,t.jsxs)(l.x,{children:[(0,t.jsxs)(d.x,{fontSize:"md",fontWeight:"700",color:rh,mb:5,children:["My Pending Requests (",e4.length,")"]}),(0,t.jsx)(S.g,{spacing:3,align:"stretch",children:e4.map(e=>(0,t.jsx)(l.x,{p:5,bg:rd,border:"1px solid",borderColor:rc,rounded:"xl",_hover:{bg:rx,borderColor:rn},transition:"all 0.2s",children:(0,t.jsxs)(m.U,{justify:"space-between",align:"center",children:[(0,t.jsxs)(S.g,{align:"start",spacing:1,flex:1,children:[(0,t.jsxs)(d.x,{fontSize:"md",fontWeight:"600",color:rh,children:["Request to ",e.to,": $",e.amount.toFixed(2)]}),e.description&&(0,t.jsx)(d.x,{fontSize:"sm",color:rg,fontWeight:"400",children:e.description})]}),(0,t.jsx)(b.C,{bg:rm,color:"white",fontSize:"xs",px:3,py:1.5,fontWeight:"700",rounded:"full",children:"Waiting"})]})},e.id))})]}),e2.length>0&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(W.i,{borderColor:rc,my:2}),(0,t.jsxs)(l.x,{children:[(0,t.jsx)(d.x,{fontSize:"md",fontWeight:"700",color:rh,mb:5,children:"Request History"}),(0,t.jsx)(S.g,{spacing:3,align:"stretch",children:e2.sort((e,r)=>r.createdAt-e.createdAt).map(e=>(0,t.jsx)(l.x,{p:5,bg:ra,border:"1px solid",borderColor:rc,rounded:"xl",opacity:"pending"!==e.status?.6:1,_hover:{opacity:1,borderColor:rn,transform:"translateX(4px)"},transition:"all 0.2s",children:(0,t.jsxs)(m.U,{justify:"space-between",align:"center",children:[(0,t.jsxs)(S.g,{align:"start",spacing:1,flex:1,children:[(0,t.jsxs)(d.x,{fontSize:"md",fontWeight:"600",color:rh,children:[e.from," â†’ ",e.to,": $",e.amount.toFixed(2)]}),e.description&&(0,t.jsx)(d.x,{fontSize:"sm",color:rg,fontWeight:"400",children:e.description})]}),(0,t.jsx)(b.C,{bg:"approved"===e.status?ru:"rejected"===e.status?rf:rm,color:"white",fontSize:"xs",px:3,py:1.5,fontWeight:"700",rounded:"full",children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})]})},e.id))})]})]}),0===e2.length&&(0,t.jsxs)(l.x,{textAlign:"center",py:16,px:8,children:[(0,t.jsx)(c.J,{as:I.LbG,boxSize:12,color:rg,opacity:.3,mb:4}),(0,t.jsx)(d.x,{fontSize:"lg",fontWeight:"600",color:rh,mb:2,children:"No requests yet"}),(0,t.jsx)(d.x,{fontSize:"sm",color:rg,children:"Create a request above to get started"})]})]}):(0,t.jsxs)(l.x,{textAlign:"center",py:16,px:8,maxW:"500px",mx:"auto",children:[(0,t.jsx)(c.J,{as:I._fJ,boxSize:12,color:rg,opacity:.3,mb:4}),(0,t.jsx)(d.x,{fontSize:"lg",fontWeight:"600",color:rh,mb:2,children:"Sign in required"}),(0,t.jsx)(d.x,{fontSize:"sm",color:rg,mb:8,children:"Please sign in to manage requests"}),(0,t.jsx)(x.z,{leftIcon:(0,t.jsx)(c.J,{as:I._fJ}),onClick:e6,bg:rn,color:"white",size:"lg",px:8,h:"52px",fontWeight:"700",fontSize:"sm",rounded:"xl",_hover:{bg:rs,transform:"translateY(-2px)",boxShadow:"lg"},_active:{transform:"translateY(0)"},transition:"all 0.2s",children:"Sign in with Google"})]})})]})]})}),(0,t.jsxs)(k.e,{flexDirection:"column",alignItems:"center",gap:5,pt:8,pb:8,bg:rd,borderTop:"1px solid",borderColor:rc,children:[(0,t.jsx)(m.U,{spacing:6,flexWrap:"wrap",justify:"center",children:["Kavin","Nikhil","Palash","Rohit"].map((e,r)=>(0,t.jsxs)(m.U,{spacing:2.5,children:[(0,t.jsx)(v.q,{name:e,bg:rn,color:"white",size:"md",fontWeight:"700",border:"2px solid ".concat(rc)}),(0,t.jsx)(d.x,{fontSize:"sm",fontWeight:"500",color:rh,children:e})]},r))}),(0,t.jsx)(d.x,{fontSize:"xs",color:rg,fontWeight:"400",children:"SquareUp \xa9 2024 \xb7 Expense Management Platform"})]})]})}):(0,t.jsx)(a.W,{maxW:"1200px",px:{base:4,md:6},py:{base:6,md:8},children:(0,t.jsxs)(l.x,{textAlign:"center",py:20,children:[(0,t.jsx)(c.J,{as:I.j8v,boxSize:16,color:rg,opacity:.3,mb:4}),(0,t.jsx)(d.x,{fontSize:"lg",fontWeight:"600",color:rh,mb:2,children:0===er.length?"No servers yet":"Select a server"}),(0,t.jsx)(d.x,{fontSize:"sm",color:rg,mb:6,children:0===er.length?"Create a server from the sidebar to get started":"Choose a server from the sidebar to manage expenses"}),0===er.length&&Q&&(0,t.jsx)(x.z,{leftIcon:(0,t.jsx)(c.J,{as:I.OvN}),onClick:()=>eh(!0),bg:rn,color:"black",_hover:{bg:rs},children:"Create Server"})]})})})]}),(0,t.jsx)(M,{isOpen:eT,onClose:()=>{eD(),eA()},selectedDebt:eC,paymentProvider:ew,isProcessingPayment:ez,onPaymentProviderChange:e_,onProcessPayment:re}),(0,t.jsx)(Z,{isOpen:eB,onClose:eR,accountStatus:eU,isLoading:eJ,isCreatingAccount:eP,onConnect:async()=>{try{await eF()}catch(e){eK({title:"Connection failed",description:e.message||"Failed to connect Stripe account",status:"error",duration:5e3,isClosable:!0})}}}),eC&&eW&&(0,t.jsx)(K,{isOpen:eM,onClose:eG,debt:eC,venmoLink:eW.venmoLink,venmoWebLink:eW.venmoWebLink,venmoUsername:eW.venmoUsername,hasVenmoUsername:eW.hasVenmoUsername,onOpenVenmo:()=>{eW.venmoLink?window.location.href=eW.venmoLink:eW.venmoWebLink&&window.open(eW.venmoWebLink,"_blank")},onCopyLink:()=>{eW.venmoWebLink&&(navigator.clipboard.writeText(eW.venmoWebLink),eK({title:"Link copied!",description:"Venmo payment link copied to clipboard",status:"success",duration:2e3,isClosable:!0}))},onMarkAsPaid:()=>{eE(e=>{ev(el,e),eK({title:"Payment marked as paid",description:"Debt has been updated",status:"success",duration:3e3,isClosable:!0})}),eG()}}),(0,t.jsx)(H,{isOpen:eQ,onClose:eZ,currentUsername:eq,onSave:async e=>{try{await eY(e),eK({title:"Venmo username saved!",description:"Others can now pay you through Venmo",status:"success",duration:3e3,isClosable:!0}),eZ()}catch(e){eK({title:"Failed to save username",description:e.message||"Please try again",status:"error",duration:5e3,isClosable:!0})}},isLoading:eO})]})}(0,A.J)("pk_live_51SkuLmAcEpd1VO7KhIRAtRDNvm7p4bZOtCQZHQUGLr1b994ZYRn9wMIzWKxfwpOKeNKwRtgWqiAtPWDHNRuZ06HM003fhKe3Lx")}},function(e){e.O(0,[703,893,130,2,950,888,774,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);